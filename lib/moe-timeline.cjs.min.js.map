{"version":3,"file":"moe-timeline.cjs.min.js","sources":["../node_modules/.pnpm/znu-event@0.0.10/node_modules/znu-event/src/main.ts","../src/index.ts","../src/utils/times.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport declare type Listener = ((...payload: any[]) => void) & { isOnce?: boolean}\n\ninterface ListenersMap {\n  [propName: string]: Listener[]\n}\n\nexport default class ZnuEvent {\n  private _listenersMap: ListenersMap\n\n  constructor() {\n    this._listenersMap = {}\n  }\n\n  /**\n   * 绑定事件\n   * @param {String|Symbol} eventName 事件名\n   * @param {Function} listener 回调函数\n   */\n  on(eventName: string, listener: Listener): ZnuEvent {\n    if (undefined === this._listenersMap[eventName]) {\n      this._listenersMap[eventName] = []\n    }\n    this._listenersMap[eventName].push(listener)\n    return this\n  }\n\n  /**\n   * 添加单次监听器 listener 到名为 eventName 的事件\n   * 当 eventName 事件下次触发是，监听器会先被删除，然后在调用\n   * @param {String|Symbol} eventName 事件名\n   * @param {Function} listener 回调函数\n   */\n  once(eventName: string, listener: Listener): ZnuEvent {\n    listener.isOnce = true\n    this.on(eventName, listener)\n    return this\n  }\n\n  /**\n   * 解除绑定\n   * 如果不指定listener，则解除所有eventName对应的回调\n   * @param {String|Symbol} eventName 事件名\n   * @param {Function} listener 回调函数\n   */\n  off(eventName: string, listener?: Listener): ZnuEvent {\n    const listeners = this._listenersMap[eventName]\n    // 事件存在\n    if (undefined !== listeners) {\n      // 清空事件名对应的所有回调\n      if (undefined === listener) {\n        delete this._listenersMap[eventName]\n      } else { // 清空指定回调\n        const index = listeners.findIndex((fn: Listener) => fn === listener)\n        listeners.splice(index, 1)\n      }\n    }\n    return this\n  }\n\n  /**\n   * 解除所有绑定\n   */\n  offAll(): void {\n    this._listenersMap = {}\n  }\n\n  /**\n   * 按照监听器注册顺序，同步调用每个注册到 eventName 的事件的监听器，并传入参数。\n   * @param {String|Symbol} eventName 事件名\n   * @param {Any} payload 载荷数据\n   * @return {Boolean} 如果事件有监听器，则返回true，否则返回false\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  emit(eventName: string, ...payload: any[]): boolean {\n    const listeners = this._listenersMap[eventName]\n    if (undefined !== listeners && listeners.length > 0) {\n      for (const [index, listener] of listeners.entries()) {\n        if (listener.isOnce) {\n          const listenerClone = listener\n          listeners.splice(index, 1)\n          listenerClone(...payload)\n        } else {\n          listener(...payload)\n        }\n      }\n      return true\n    } else {\n      return false\n    }\n  }\n\n  /**\n   * 检测是否已绑定事件\n   * @param {String|Symbol} eventName 事件名\n   * @return {Boolean}  是否已绑定\n   */\n  has(eventName: string): boolean {\n    return undefined !== this._listenersMap[eventName] && this._listenersMap[eventName].length > 0\n  }\n\n  /**\n   * 返回所有事件名称\n   * @return {Boolean} 事件名称\n   */\n  eventNames(): string[] {\n    const eventNames: string[] = []\n    for (const eventName in this._listenersMap) {\n      eventNames.push(eventName)\n    }\n    return eventNames\n  }\n\n  /**\n   * 销毁实例\n   */\n  destroy(): void{\n    this.offAll()\n  }\n}\n",null,null],"names":["ZnuEvent","this","_listenersMap","prototype","on","eventName","listener","undefined","push","once","isOnce","off","listeners","index","findIndex","fn","splice","offAll","emit","payload","_i","arguments","length","_b","__values","entries","_c","next","done","_d","__read","value","listenerClone","apply","__spread","has","eventNames","destroy","constructor","id","console","log","Error","today","$canvas","document","getElementById","canvasContext","getContext","startTime","Date","setHours","setMinutes","setSeconds","setMilliseconds","getTime","endTime","getTodayEndTime","currentTime","area","event","Event","create","time","clearRect","width","height","_a","forEach","item","drawArea","bgColor","hourHeight","minuteHeight","secondHeight","timeDiff","i","x","drawLine","timeEnd","addEventListener","e","computedStyle","getComputedStyle","paddingTop","parseInt","paddingBottom","paddingLeft","paddingRight","pageX","getBoundingClientRect","left","y","pageY","top","beginPath","moveTo","lineTo","stroke","strokeStyle","lineWidth","closePath","startX","endX","rect","fillStyle","fill","name","args"],"mappings":"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"}