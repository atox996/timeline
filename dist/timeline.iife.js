var $timeline=function(Y){"use strict";var ie=Object.defineProperty;var se=(Y,L,k)=>L in Y?ie(Y,L,{enumerable:!0,configurable:!0,writable:!0,value:k}):Y[L]=k;var gt=(Y,L,k)=>(se(Y,typeof L!="symbol"?L+"":L,k),k),Lt=(Y,L,k)=>{if(!L.has(Y))throw TypeError("Cannot "+k)};var s=(Y,L,k)=>(Lt(Y,L,"read from private field"),k?k.call(Y):L.get(Y)),F=(Y,L,k)=>{if(L.has(Y))throw TypeError("Cannot add the same private member more than once");L instanceof WeakSet?L.add(Y):L.set(Y,k)},_=(Y,L,k,at)=>(Lt(Y,L,"write to private field"),at?at.call(Y,k):L.set(Y,k),k);var j=(Y,L,k)=>(Lt(Y,L,"access private method"),k);var ot,Q,ht,I,J,z,st,N,tt,K,ft,pt,Pt,Mt,Xt,Dt,It,Tt,Ut,xt,At,yt,Zt,St,jt,Yt,Nt,bt,Rt,wt,mt,ct,et,lt;function L(g){return{all:g=g||new Map,on:function(t,e){var a=g.get(t);a?a.push(e):g.set(t,[e])},off:function(t,e){var a=g.get(t);a&&(e?a.splice(a.indexOf(e)>>>0,1):g.set(t,[]))},emit:function(t,e){var a=g.get(t);a&&a.slice().map(function($){$(e)}),(a=g.get("*"))&&a.slice().map(function($){$(t,e)})}}}var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var zt={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e=1e3,a=6e4,$=36e5,v="millisecond",f="second",u="minute",c="hour",T="day",E="week",M="month",y="quarter",D="year",S="date",o="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(l){var r=["th","st","nd","rd"],i=l%100;return"["+l+(r[(i-20)%10]||r[i]||r[0])+"]"}},O=function(l,r,i){var h=String(l);return!h||h.length>=r?l:""+Array(r+1-h.length).join(i)+l},R={s:O,z:function(l){var r=-l.utcOffset(),i=Math.abs(r),h=Math.floor(i/60),n=i%60;return(r<=0?"+":"-")+O(h,2,"0")+":"+O(n,2,"0")},m:function l(r,i){if(r.date()<i.date())return-l(i,r);var h=12*(i.year()-r.year())+(i.month()-r.month()),n=r.clone().add(h,M),m=i-n<0,d=r.clone().add(h+(m?-1:1),M);return+(-(h+(i-n)/(m?n-d:d-n))||0)},a:function(l){return l<0?Math.ceil(l)||0:Math.floor(l)},p:function(l){return{M,y:D,w:E,d:T,D:S,h:c,m:u,s:f,ms:v,Q:y}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(l){return l===void 0}},C="en",X={};X[C]=b;var A="$isDayjsObject",G=function(l){return l instanceof Ot||!(!l||!l[A])},q=function l(r,i,h){var n;if(!r)return C;if(typeof r=="string"){var m=r.toLowerCase();X[m]&&(n=m),i&&(X[m]=i,n=m);var d=r.split("-");if(!n&&d.length>1)return l(d[0])}else{var w=r.name;X[w]=r,n=w}return!h&&n&&(C=n),n||!h&&C},H=function(l,r){if(G(l))return l.clone();var i=typeof r=="object"?r:{};return i.date=l,i.args=arguments,new Ot(i)},p=R;p.l=q,p.i=G,p.w=function(l,r){return H(l,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Ot=function(){function l(i){this.$L=q(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[A]=!0}var r=l.prototype;return r.parse=function(i){this.$d=function(h){var n=h.date,m=h.utc;if(n===null)return new Date(NaN);if(p.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var d=n.match(x);if(d){var w=d[2]-1||0,W=(d[7]||"0").substring(0,3);return m?new Date(Date.UTC(d[1],w,d[3]||1,d[4]||0,d[5]||0,d[6]||0,W)):new Date(d[1],w,d[3]||1,d[4]||0,d[5]||0,d[6]||0,W)}}return new Date(n)}(i),this.init()},r.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},r.$utils=function(){return p},r.isValid=function(){return this.$d.toString()!==o},r.isSame=function(i,h){var n=H(i);return this.startOf(h)<=n&&n<=this.endOf(h)},r.isAfter=function(i,h){return H(i)<this.startOf(h)},r.isBefore=function(i,h){return this.endOf(h)<H(i)},r.$g=function(i,h,n){return p.u(i)?this[h]:this.set(n,i)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(i,h){var n=this,m=!!p.u(h)||h,d=p.p(i),w=function(rt,B){var it=p.w(n.$u?Date.UTC(n.$y,B,rt):new Date(n.$y,B,rt),n);return m?it:it.endOf(T)},W=function(rt,B){return p.w(n.toDate()[rt].apply(n.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(B)),n)},U=this.$W,Z=this.$M,V=this.$D,ut="set"+(this.$u?"UTC":"");switch(d){case D:return m?w(1,0):w(31,11);case M:return m?w(1,Z):w(0,Z+1);case E:var nt=this.$locale().weekStart||0,dt=(U<nt?U+7:U)-nt;return w(m?V-dt:V+(6-dt),Z);case T:case S:return W(ut+"Hours",0);case c:return W(ut+"Minutes",1);case u:return W(ut+"Seconds",2);case f:return W(ut+"Milliseconds",3);default:return this.clone()}},r.endOf=function(i){return this.startOf(i,!1)},r.$set=function(i,h){var n,m=p.p(i),d="set"+(this.$u?"UTC":""),w=(n={},n[T]=d+"Date",n[S]=d+"Date",n[M]=d+"Month",n[D]=d+"FullYear",n[c]=d+"Hours",n[u]=d+"Minutes",n[f]=d+"Seconds",n[v]=d+"Milliseconds",n)[m],W=m===T?this.$D+(h-this.$W):h;if(m===M||m===D){var U=this.clone().set(S,1);U.$d[w](W),U.init(),this.$d=U.set(S,Math.min(this.$D,U.daysInMonth())).$d}else w&&this.$d[w](W);return this.init(),this},r.set=function(i,h){return this.clone().$set(i,h)},r.get=function(i){return this[p.p(i)]()},r.add=function(i,h){var n,m=this;i=Number(i);var d=p.p(h),w=function(Z){var V=H(m);return p.w(V.date(V.date()+Math.round(Z*i)),m)};if(d===M)return this.set(M,this.$M+i);if(d===D)return this.set(D,this.$y+i);if(d===T)return w(1);if(d===E)return w(7);var W=(n={},n[u]=a,n[c]=$,n[f]=e,n)[d]||1,U=this.$d.getTime()+i*W;return p.w(U,this)},r.subtract=function(i,h){return this.add(-1*i,h)},r.format=function(i){var h=this,n=this.$locale();if(!this.isValid())return n.invalidDate||o;var m=i||"YYYY-MM-DDTHH:mm:ssZ",d=p.z(this),w=this.$H,W=this.$m,U=this.$M,Z=n.weekdays,V=n.months,ut=n.meridiem,nt=function(B,it,$t,Ct){return B&&(B[it]||B(h,m))||$t[it].slice(0,Ct)},dt=function(B){return p.s(w%12||12,B,"0")},rt=ut||function(B,it,$t){var Ct=B<12?"AM":"PM";return $t?Ct.toLowerCase():Ct};return m.replace(P,function(B,it){return it||function($t){switch($t){case"YY":return String(h.$y).slice(-2);case"YYYY":return p.s(h.$y,4,"0");case"M":return U+1;case"MM":return p.s(U+1,2,"0");case"MMM":return nt(n.monthsShort,U,V,3);case"MMMM":return nt(V,U);case"D":return h.$D;case"DD":return p.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return nt(n.weekdaysMin,h.$W,Z,2);case"ddd":return nt(n.weekdaysShort,h.$W,Z,3);case"dddd":return Z[h.$W];case"H":return String(w);case"HH":return p.s(w,2,"0");case"h":return dt(1);case"hh":return dt(2);case"a":return rt(w,W,!0);case"A":return rt(w,W,!1);case"m":return String(W);case"mm":return p.s(W,2,"0");case"s":return String(h.$s);case"ss":return p.s(h.$s,2,"0");case"SSS":return p.s(h.$ms,3,"0");case"Z":return d}return null}(B)||d.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(i,h,n){var m,d=this,w=p.p(h),W=H(i),U=(W.utcOffset()-this.utcOffset())*a,Z=this-W,V=function(){return p.m(d,W)};switch(w){case D:m=V()/12;break;case M:m=V();break;case y:m=V()/3;break;case E:m=(Z-U)/6048e5;break;case T:m=(Z-U)/864e5;break;case c:m=Z/$;break;case u:m=Z/a;break;case f:m=Z/e;break;default:m=Z}return n?m:p.a(m)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return X[this.$L]},r.locale=function(i,h){if(!i)return this.$L;var n=this.clone(),m=q(i,h,!0);return m&&(n.$L=m),n},r.clone=function(){return p.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},l}(),Wt=Ot.prototype;return H.prototype=Wt,[["$ms",v],["$s",f],["$m",u],["$H",c],["$W",T],["$M",M],["$y",D],["$D",S]].forEach(function(l){Wt[l[1]]=function(r){return this.$g(r,l[0],l[1])}}),H.extend=function(l,r){return l.$i||(l(r,Ot,H),l.$i=!0),H},H.locale=q,H.isDayjs=G,H.unix=function(l){return H(1e3*l)},H.en=X[C],H.Ls=X,H.p={},H})})(zt);var Bt=zt.exports;const Ht=at(Bt);var _t={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e="minute",a=/[+-]\d\d(?::?\d\d)?/g,$=/([+-]|\d\d)/g;return function(v,f,u){var c=f.prototype;u.utc=function(o){var x={date:o,utc:!0,args:arguments};return new f(x)},c.utc=function(o){var x=u(this.toDate(),{locale:this.$L,utc:!0});return o?x.add(this.utcOffset(),e):x},c.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var T=c.parse;c.parse=function(o){o.utc&&(this.$u=!0),this.$utils().u(o.$offset)||(this.$offset=o.$offset),T.call(this,o)};var E=c.init;c.init=function(){if(this.$u){var o=this.$d;this.$y=o.getUTCFullYear(),this.$M=o.getUTCMonth(),this.$D=o.getUTCDate(),this.$W=o.getUTCDay(),this.$H=o.getUTCHours(),this.$m=o.getUTCMinutes(),this.$s=o.getUTCSeconds(),this.$ms=o.getUTCMilliseconds()}else E.call(this)};var M=c.utcOffset;c.utcOffset=function(o,x){var P=this.$utils().u;if(P(o))return this.$u?0:P(this.$offset)?M.call(this):this.$offset;if(typeof o=="string"&&(o=function(C){C===void 0&&(C="");var X=C.match(a);if(!X)return null;var A=(""+X[0]).match($)||["-",0,0],G=A[0],q=60*+A[1]+ +A[2];return q===0?0:G==="+"?q:-q}(o),o===null))return this;var b=Math.abs(o)<=16?60*o:o,O=this;if(x)return O.$offset=b,O.$u=o===0,O;if(o!==0){var R=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(O=this.local().add(b+R,e)).$offset=b,O.$x.$localOffset=R}else O=this.utc();return O};var y=c.format;c.format=function(o){var x=o||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return y.call(this,x)},c.valueOf=function(){var o=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*o},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var D=c.toDate;c.toDate=function(o){return o==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():D.call(this)};var S=c.diff;c.diff=function(o,x,P){if(o&&this.$u===o.$u)return S.call(this,o,x,P);var b=this.local(),O=u(o).local();return S.call(b,O,x,P)}}})})(_t);var qt=_t.exports;const Jt=at(qt);var Et={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function($,v,f){var u,c=function(y,D,S){S===void 0&&(S={});var o=new Date(y),x=function(P,b){b===void 0&&(b={});var O=b.timeZoneName||"short",R=P+"|"+O,C=a[R];return C||(C=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:P,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:O}),a[R]=C),C}(D,S);return x.formatToParts(o)},T=function(y,D){for(var S=c(y,D),o=[],x=0;x<S.length;x+=1){var P=S[x],b=P.type,O=P.value,R=e[b];R>=0&&(o[R]=parseInt(O,10))}var C=o[3],X=C===24?0:C,A=o[0]+"-"+o[1]+"-"+o[2]+" "+X+":"+o[4]+":"+o[5]+":000",G=+y;return(f.utc(A).valueOf()-(G-=G%1e3))/6e4},E=v.prototype;E.tz=function(y,D){y===void 0&&(y=u);var S=this.utcOffset(),o=this.toDate(),x=o.toLocaleString("en-US",{timeZone:y}),P=Math.round((o-new Date(x))/1e3/60),b=f(x,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(o.getTimezoneOffset()/15)-P,!0);if(D){var O=b.utcOffset();b=b.add(S-O,"minute")}return b.$x.$timezone=y,b},E.offsetName=function(y){var D=this.$x.$timezone||f.tz.guess(),S=c(this.valueOf(),D,{timeZoneName:y}).find(function(o){return o.type.toLowerCase()==="timezonename"});return S&&S.value};var M=E.startOf;E.startOf=function(y,D){if(!this.$x||!this.$x.$timezone)return M.call(this,y,D);var S=f(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return M.call(S,y,D).tz(this.$x.$timezone,!0)},f.tz=function(y,D,S){var o=S&&D,x=S||D||u,P=T(+f(),x);if(typeof y!="string")return f(y).tz(x);var b=function(X,A,G){var q=X-60*A*1e3,H=T(q,G);if(A===H)return[q,A];var p=T(q-=60*(H-A)*1e3,G);return H===p?[q,H]:[X-60*Math.min(H,p)*1e3,Math.max(H,p)]}(f.utc(y,o).valueOf(),P,x),O=b[0],R=b[1],C=f(O).utcOffset(R);return C.$x.$timezone=x,C},f.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},f.tz.setDefault=function(y){u=y}}})})(Et);var Vt=Et.exports;const Gt=at(Vt);Ht.extend(Jt),Ht.extend(Gt);const vt=(g,t="MM/DD HH:mm Z",e)=>Ht(g).tz(e).format(t),Ft=(g,t)=>{let e,a=0;return(...$)=>{const v=Date.now(),f=v-a;!a||f>=t?(a=v,g.apply(void 0,$)):e||(e=setTimeout(()=>{a=v,g.apply(void 0,$),e=null},t-f))}},kt=g=>{const[t,e]=[g[0],g[1]],a=e.clientX-t.clientX,$=e.clientY-t.clientY;return Math.sqrt(a*a+$*$)},Qt=(g,t)=>{const e=document.createElement("canvas");e.width=e.height=1;const a=e.getContext("2d");a.fillStyle=g,a.fillRect(0,0,1,1);const $=a.getImageData(0,0,1,1).data;return`rgba(${$[0]}, ${$[1]}, ${$[2]}, ${t})`},Kt=({xCenterPoint:g,cfg:t,timePerPixel:e,timeSpacing:a,currentTime:$,$canvas:v,screenScaleCount:f,scaleHeight:u,startTime:c,drawLine:T,drawText:E,drawArea:M})=>{const y=({space:S,scaleTimeFormat:o,bgTimeFormat:x,pointerTimeFormat:P,timezone:b})=>{E({x:v.width-g/10,y:6,text:vt($,x,b),fontSize:`${v.height-5}px`,align:"right",baseLine:"top",color:t.bgTextColor});const O=c%a,R=O/e;for(let C=0;C<f;C++){const X=C*t.scaleSpacing-R-t.pointerWidth/2,A=c+C*a-O;if(A%(a*S)===0){T({x:X,y:u.long}),E({x:X,y:v.height-u.long-5,text:vt(A,o,b),baseLine:"bottom"});continue}T({x:X,y:u.short})}T({x:g-t.pointerWidth/2,y:v.height,width:t.pointerWidth,color:t.pointerColor}),M({startX:g-t.pointerDisplayWidth/2,startY:4,endX:g+t.pointerDisplayWidth/2,endY:4+t.pointerDisplayHeight,bgColor:t.pointerColor}),E({x:g,y:t.pointerDisplayHeight/2+5,text:vt($,P,b),align:"center",baseLine:"middle"})},D=t.thresholdsConfig[a];D&&y({space:D.space,scaleTimeFormat:D.scaleTimeFormat,bgTimeFormat:D.bgTimeFormat,pointerTimeFormat:D.pointerTimeFormat,timezone:t.timezone})},te={fill:!0,width:1e3,height:60,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",fontFamily:"Arial",scaleColor:"#ffffff",scaleSpacing:7,areaBgColor:"#ffffff55",pointerColor:"#00aeec",pointerWidth:3,pointerDisplayWidth:100,pointerDisplayHeight:14,fps:60,zoom:3,timeSpacingList:[10,100,1e3,1e4,6e4,6e5,36e5,864e5,6048e5],thresholdsConfig:{10:{scaleTimeFormat:"mm:ss:SSS",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},100:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},1e3:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},1e4:{scaleTimeFormat:"HH:mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:12},6e4:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},6e5:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},36e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"MM/DD HH:mm",space:12},864e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"YYYY/MM/DD HH:mm",space:12},6048e5:{scaleTimeFormat:"YYYY/MM/DD",bgTimeFormat:"YYYY",pointerTimeFormat:"YYYY/MM/DD",space:10}}};class ee{constructor(t,e){F(this,pt);F(this,Mt);F(this,Dt);F(this,Tt);F(this,xt);F(this,yt);F(this,St);F(this,Yt);F(this,bt);F(this,et);gt(this,"$canvas");gt(this,"$canvasParent");gt(this,"ctx");gt(this,"cfg");F(this,ot,void 0);F(this,Q,void 0);F(this,ht,L());F(this,I,0);F(this,J,void 0);F(this,z,void 0);F(this,st,void 0);F(this,N,!1);F(this,tt,null);F(this,K,null);F(this,ft,0);F(this,wt,({x:t,y:e,width:a=1,color:$=this.cfg.scaleColor})=>{this.ctx.beginPath(),this.ctx.moveTo(t,this.$canvas.height),this.ctx.lineTo(t,this.$canvas.height-e),this.ctx.closePath(),this.ctx.strokeStyle=$,this.ctx.lineWidth=a,this.ctx.stroke()});F(this,mt,({x:t,y:e,text:a,color:$=this.cfg.textColor,fontSize:v="11px",align:f="center",baseLine:u="alphabetic"})=>{this.ctx.beginPath(),this.ctx.font=`${v} ${this.cfg.fontFamily}`,this.ctx.fillStyle=$,this.ctx.textAlign=f,this.ctx.textBaseline=u,this.ctx.fillText(a,t,e)});F(this,ct,({startX:t,startY:e,endX:a,endY:$,bgColor:v})=>{this.ctx.beginPath(),this.ctx.rect(t,e,a-t,$-e),this.ctx.fillStyle=v,this.ctx.fill()});if(!t)throw new Error("canvas Element Or Element ID is required!");typeof t=="string"?this.$canvas=document.querySelector(t):this.$canvas=t,this.ctx=this.$canvas.getContext("2d"),this.cfg={...te,...e},e!=null&&e.pointColor&&(this.cfg.pointerColor=e.pointColor),e!=null&&e.pointWidth&&(this.cfg.pointerWidth=e.pointWidth);const{fill:a,width:$,height:v,zoom:f,timeSpacingList:u,scaleHeight:c,textColor:T,bgTextColor:E}=this.cfg;if(E||(this.cfg.bgTextColor=Qt(T,.18)),f<0||f>=u.length||f%1!==0)throw new Error(`zoom must be 0 ~ ${u.length-1}, and must be an integer`);if(a){const M=this.$canvas.parentElement;this.$canvasParent=M,this.$canvas.width=M.clientWidth,this.$canvas.height=M.clientHeight,new ResizeObserver(Ft(j(this,St,jt).bind(this),200)).observe(M)}else this.$canvas.width=$,this.$canvas.height=v;_(this,z,u[f]),c!=null&&c.long&&(c!=null&&c.short)?_(this,st,c):_(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw(),this.$canvas.addEventListener("wheel",j(this,Dt,It).bind(this),{passive:!1}),this.$canvas.addEventListener("mousedown",j(this,Mt,Xt).bind(this)),this.$canvas.addEventListener("click",j(this,pt,Pt).bind(this)),this.$canvas.addEventListener("touchstart",j(this,Tt,Ut).bind(this),{passive:!1}),this.$canvas.addEventListener("touchmove",Ft(j(this,xt,At).bind(this),1e3/this.cfg.fps),{passive:!1}),this.$canvas.addEventListener("touchend",j(this,yt,Zt).bind(this))}draw({currentTime:t,areas:e,_privateFlag:a}={}){if(s(this,N)&&!a)return;_(this,I,t||Date.now()),_(this,J,e||[]);const $=this.$canvas.width/2,v=Math.ceil(this.$canvas.width/this.cfg.scaleSpacing),f=v*s(this,z),[u,c]=_(this,ot,[s(this,I)-f/2,s(this,I)+f/2]);_(this,Q,f/this.$canvas.width),j(this,Yt,Nt).call(this),s(this,ct).call(this,{startX:0,startY:0,endX:this.$canvas.width,endY:this.$canvas.height,bgColor:this.cfg.bgColor}),s(this,J).forEach(T=>{const E=T.startTime<=u?0:Math.round((T.startTime-u)/s(this,Q)),M=T.endTime>=c?this.$canvas.width:Math.round((T.endTime-u)/s(this,Q));E<this.$canvas.width&&M>0&&s(this,ct).call(this,{startX:E,startY:0,endX:M,endY:this.$canvas.height,bgColor:T.bgColor||this.cfg.areaBgColor})}),Kt.bind(this)({xCenterPoint:$,screenScaleCount:v,startTime:u,timePerPixel:s(this,Q),scaleHeight:s(this,st),timeSpacing:s(this,z),currentTime:s(this,I),$canvas:this.$canvas,cfg:this.cfg,drawLine:s(this,wt).bind(this),drawText:s(this,mt).bind(this),drawArea:s(this,ct).bind(this)}),j(this,bt,Rt).call(this)}getCurrentTime(){return s(this,I)}getTimeRange(){return s(this,ot)}getMsPerPixel(){return s(this,Q)}on(t,e){s(this,ht).on(t,e)}off(t,e){s(this,ht).off(t,e)}}return ot=new WeakMap,Q=new WeakMap,ht=new WeakMap,I=new WeakMap,J=new WeakMap,z=new WeakMap,st=new WeakMap,N=new WeakMap,tt=new WeakMap,K=new WeakMap,ft=new WeakMap,pt=new WeakSet,Pt=function(t){if(s(this,N))return;const[e]=s(this,ot),a=this.$canvas.getBoundingClientRect(),$=t.clientX-a.left,v=Math.round(e+$*s(this,Q));_(this,I,v),this.draw({currentTime:s(this,I),areas:s(this,J)}),j(this,et,lt).call(this,"click",v)},Mt=new WeakSet,Xt=function(t){_(this,N,!1);let e=t.clientX,a=s(this,I);_(this,ft,t.clientX);const $=Ft(({clientX:u})=>{s(this,N)||Math.abs(u-s(this,ft))>5&&_(this,N,!0),s(this,N)&&(a=Math.round(s(this,I)-s(this,z)/this.cfg.scaleSpacing*(u-e)),e=u,this.draw({currentTime:a,areas:s(this,J),_privateFlag:!0}))},1e3/this.cfg.fps),v=u=>{const c=this.$canvas.getBoundingClientRect(),T=u.clientX-c.left,E=u.clientY-c.top,M=3;(T<M||T>this.$canvas.width-M||E<M||E>this.$canvas.height-M)&&(this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",v))},f=()=>{this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",v),document.removeEventListener("mouseup",f),s(this,N)&&j(this,et,lt).call(this,"dragged",a)};this.$canvas.addEventListener("mousemove",$),this.$canvas.addEventListener("mousemove",v),document.addEventListener("mouseup",f)},Dt=new WeakSet,It=function(t){t.preventDefault();const e=this.cfg.timeSpacingList.findIndex(a=>a===s(this,z));t.deltaY<0&&e>0?(_(this,z,this.cfg.timeSpacingList[e-1]),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0}),j(this,et,lt).call(this,"zoom",e-1)):t.deltaY>0&&e<this.cfg.timeSpacingList.length-1&&(_(this,z,this.cfg.timeSpacingList[e+1]),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0}),j(this,et,lt).call(this,"zoom",e+1))},Tt=new WeakSet,Ut=function(t){t.preventDefault(),_(this,N,!0),_(this,tt,t.touches[0].clientX),t.touches.length===2&&_(this,K,kt(t.touches))},xt=new WeakSet,At=function(t){if(t.preventDefault(),!s(this,N))return;if(t.touches.length===2&&s(this,K)!==null){const v=kt(t.touches),f=Math.abs(s(this,K)-v)>=35;if(!f)return;let u=this.cfg.timeSpacingList.findIndex(c=>c===s(this,z));if(v<s(this,K)?u+=1:u-=1,u<0||u>this.cfg.timeSpacingList.length-1)return;_(this,z,this.cfg.timeSpacingList[u]),f&&_(this,K,v),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0});return}if(s(this,tt)===null)return;const e=t.touches[0],a=e.clientX-s(this,tt),$=Math.round(s(this,I)-s(this,z)/this.cfg.scaleSpacing*a);_(this,tt,e.clientX),this.draw({currentTime:$,areas:s(this,J),_privateFlag:!0})},yt=new WeakSet,Zt=function(t){s(this,N)&&(_(this,N,!1),_(this,tt,null),t.touches.length<2&&_(this,K,null),j(this,et,lt).call(this,"dragged",s(this,I)))},St=new WeakSet,jt=function(){this.$canvasParent&&(this.$canvas.width=this.$canvasParent.clientWidth,this.$canvas.height=this.$canvasParent.clientHeight,this.cfg.scaleHeight||_(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw({currentTime:s(this,I),areas:s(this,J)}))},Yt=new WeakSet,Nt=function(){this.ctx.clearRect(0,0,this.$canvas.width,this.$canvas.height)},bt=new WeakSet,Rt=function(){const t=()=>s(this,z)<1e3?`${s(this,z)}ms`:s(this,z)<6e4?`${Math.round(s(this,z)/100)/10}sec`:s(this,z)<36e5?`${Math.round(s(this,z)/100/60)/10}min`:s(this,z)<864e5?`${Math.round(s(this,z)/100/60/60)/10}hours`:s(this,z)<6048e5?`${Math.round(s(this,z)/100/60/60/24)/10}days`:`${Math.round(s(this,z)/100/60/60/24/7)/10}weeks`;s(this,mt).call(this,{x:this.cfg.scaleSpacing+12,y:9,text:t(),align:"left",baseLine:"middle"}),this.ctx.beginPath(),this.ctx.moveTo(5,6),this.ctx.lineTo(5,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,6),this.ctx.strokeStyle=this.cfg.scaleColor,this.ctx.lineWidth=1.5,this.ctx.stroke()},wt=new WeakMap,mt=new WeakMap,ct=new WeakMap,et=new WeakSet,lt=function(...t){s(this,ht).emit(...t)},Y.default=ee,Y.format=vt,Object.defineProperties(Y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),Y}({});
