var $timeline=function(f){"use strict";var Lt=Object.defineProperty;var Mt=f=>{throw TypeError(f)};var _t=(f,M,Y)=>M in f?Lt(f,M,{enumerable:!0,configurable:!0,writable:!0,value:Y}):f[M]=Y;var it=(f,M,Y)=>_t(f,typeof M!="symbol"?M+"":M,Y),dt=(f,M,Y)=>M.has(f)||Mt("Cannot "+Y);var h=(f,M,Y)=>(dt(f,M,"read from private field"),Y?Y.call(f):M.get(f)),E=(f,M,Y)=>M.has(f)?Mt("Cannot add the same private member more than once"):M instanceof WeakSet?M.add(f):M.set(f,Y),k=(f,M,Y,st)=>(dt(f,M,"write to private field"),st?st.call(f,Y):M.set(f,Y),Y),Z=(f,M,Y)=>(dt(f,M,"access private method"),Y);var J,_,A,y,B,N,C,Dt,Tt,yt,bt,wt,rt,Q,q,Yt;function M(m){return{all:m=m||new Map,on:function(s,n){var a=m.get(s);a?a.push(n):m.set(s,[n])},off:function(s,n){var a=m.get(s);a&&(n?a.splice(a.indexOf(n)>>>0,1):m.set(s,[]))},emit:function(s,n){var a=m.get(s);a&&a.slice().map(function(l){l(n)}),(a=m.get("*"))&&a.slice().map(function(l){l(s,n)})}}}var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function st(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var gt={exports:{}};(function(m,s){(function(n,a){m.exports=a()})(Y,function(){var n=1e3,a=6e4,l=36e5,g="millisecond",$="second",D="minute",T="hour",b="day",S="week",v="month",z="quarter",O="year",I="date",at="Invalid Date",lt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,mt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ot={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var i=["th","st","nd","rd"],t=o%100;return"["+o+(i[(t-20)%10]||i[t]||i[0])+"]"}},K=function(o,i,t){var r=String(o);return!r||r.length>=i?o:""+Array(i+1-r.length).join(t)+o},V={s:K,z:function(o){var i=-o.utcOffset(),t=Math.abs(i),r=Math.floor(t/60),e=t%60;return(i<=0?"+":"-")+K(r,2,"0")+":"+K(e,2,"0")},m:function o(i,t){if(i.date()<t.date())return-o(t,i);var r=12*(t.year()-i.year())+(t.month()-i.month()),e=i.clone().add(r,v),c=t-e<0,u=i.clone().add(r+(c?-1:1),v);return+(-(r+(t-e)/(c?e-u:u-e))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:v,y:O,w:S,d:b,D:I,h:T,m:D,s:$,ms:g,Q:z}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},j="en",P={};P[j]=ot;var vt="$isDayjsObject",ft=function(o){return o instanceof ct||!(!o||!o[vt])},ht=function o(i,t,r){var e;if(!i)return j;if(typeof i=="string"){var c=i.toLowerCase();P[c]&&(e=c),t&&(P[c]=t,e=c);var u=i.split("-");if(!e&&u.length>1)return o(u[0])}else{var p=i.name;P[p]=i,e=p}return!r&&e&&(j=e),e||!r&&j},x=function(o,i){if(ft(o))return o.clone();var t=typeof i=="object"?i:{};return t.date=o,t.args=arguments,new ct(t)},d=V;d.l=ht,d.i=ft,d.w=function(o,i){return x(o,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var ct=function(){function o(t){this.$L=ht(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[vt]=!0}var i=o.prototype;return i.parse=function(t){this.$d=function(r){var e=r.date,c=r.utc;if(e===null)return new Date(NaN);if(d.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var u=e.match(lt);if(u){var p=u[2]-1||0,w=(u[7]||"0").substring(0,3);return c?new Date(Date.UTC(u[1],p,u[3]||1,u[4]||0,u[5]||0,u[6]||0,w)):new Date(u[1],p,u[3]||1,u[4]||0,u[5]||0,u[6]||0,w)}}return new Date(e)}(t),this.init()},i.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},i.$utils=function(){return d},i.isValid=function(){return this.$d.toString()!==at},i.isSame=function(t,r){var e=x(t);return this.startOf(r)<=e&&e<=this.endOf(r)},i.isAfter=function(t,r){return x(t)<this.startOf(r)},i.isBefore=function(t,r){return this.endOf(r)<x(t)},i.$g=function(t,r,e){return d.u(t)?this[r]:this.set(e,t)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(t,r){var e=this,c=!!d.u(r)||r,u=d.p(t),p=function(U,L){var X=d.w(e.$u?Date.UTC(e.$y,L,U):new Date(e.$y,L,U),e);return c?X:X.endOf(b)},w=function(U,L){return d.w(e.toDate()[U].apply(e.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(L)),e)},F=this.$W,H=this.$M,W=this.$D,G="set"+(this.$u?"UTC":"");switch(u){case O:return c?p(1,0):p(31,11);case v:return c?p(1,H):p(0,H+1);case S:var R=this.$locale().weekStart||0,tt=(F<R?F+7:F)-R;return p(c?W-tt:W+(6-tt),H);case b:case I:return w(G+"Hours",0);case T:return w(G+"Minutes",1);case D:return w(G+"Seconds",2);case $:return w(G+"Milliseconds",3);default:return this.clone()}},i.endOf=function(t){return this.startOf(t,!1)},i.$set=function(t,r){var e,c=d.p(t),u="set"+(this.$u?"UTC":""),p=(e={},e[b]=u+"Date",e[I]=u+"Date",e[v]=u+"Month",e[O]=u+"FullYear",e[T]=u+"Hours",e[D]=u+"Minutes",e[$]=u+"Seconds",e[g]=u+"Milliseconds",e)[c],w=c===b?this.$D+(r-this.$W):r;if(c===v||c===O){var F=this.clone().set(I,1);F.$d[p](w),F.init(),this.$d=F.set(I,Math.min(this.$D,F.daysInMonth())).$d}else p&&this.$d[p](w);return this.init(),this},i.set=function(t,r){return this.clone().$set(t,r)},i.get=function(t){return this[d.p(t)]()},i.add=function(t,r){var e,c=this;t=Number(t);var u=d.p(r),p=function(H){var W=x(c);return d.w(W.date(W.date()+Math.round(H*t)),c)};if(u===v)return this.set(v,this.$M+t);if(u===O)return this.set(O,this.$y+t);if(u===b)return p(1);if(u===S)return p(7);var w=(e={},e[D]=a,e[T]=l,e[$]=n,e)[u]||1,F=this.$d.getTime()+t*w;return d.w(F,this)},i.subtract=function(t,r){return this.add(-1*t,r)},i.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||at;var c=t||"YYYY-MM-DDTHH:mm:ssZ",u=d.z(this),p=this.$H,w=this.$m,F=this.$M,H=e.weekdays,W=e.months,G=e.meridiem,R=function(L,X,et,ut){return L&&(L[X]||L(r,c))||et[X].slice(0,ut)},tt=function(L){return d.s(p%12||12,L,"0")},U=G||function(L,X,et){var ut=L<12?"AM":"PM";return et?ut.toLowerCase():ut};return c.replace(mt,function(L,X){return X||function(et){switch(et){case"YY":return String(r.$y).slice(-2);case"YYYY":return d.s(r.$y,4,"0");case"M":return F+1;case"MM":return d.s(F+1,2,"0");case"MMM":return R(e.monthsShort,F,W,3);case"MMMM":return R(W,F);case"D":return r.$D;case"DD":return d.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return R(e.weekdaysMin,r.$W,H,2);case"ddd":return R(e.weekdaysShort,r.$W,H,3);case"dddd":return H[r.$W];case"H":return String(p);case"HH":return d.s(p,2,"0");case"h":return tt(1);case"hh":return tt(2);case"a":return U(p,w,!0);case"A":return U(p,w,!1);case"m":return String(w);case"mm":return d.s(w,2,"0");case"s":return String(r.$s);case"ss":return d.s(r.$s,2,"0");case"SSS":return d.s(r.$ms,3,"0");case"Z":return u}return null}(L)||u.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(t,r,e){var c,u=this,p=d.p(r),w=x(t),F=(w.utcOffset()-this.utcOffset())*a,H=this-w,W=function(){return d.m(u,w)};switch(p){case O:c=W()/12;break;case v:c=W();break;case z:c=W()/3;break;case S:c=(H-F)/6048e5;break;case b:c=(H-F)/864e5;break;case T:c=H/l;break;case D:c=H/a;break;case $:c=H/n;break;default:c=H}return e?c:d.a(c)},i.daysInMonth=function(){return this.endOf(v).$D},i.$locale=function(){return P[this.$L]},i.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),c=ht(t,r,!0);return c&&(e.$L=c),e},i.clone=function(){return d.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},o}(),pt=ct.prototype;return x.prototype=pt,[["$ms",g],["$s",$],["$m",D],["$H",T],["$W",b],["$M",v],["$y",O],["$D",I]].forEach(function(o){pt[o[1]]=function(i){return this.$g(i,o[0],o[1])}}),x.extend=function(o,i){return o.$i||(o(i,ct,x),o.$i=!0),x},x.locale=ht,x.isDayjs=ft,x.unix=function(o){return x(1e3*o)},x.en=P[j],x.Ls=P,x.p={},x})})(gt);var St=gt.exports;const xt=st(St),nt=(m,s="MM/DD HH:mm")=>xt(m).format(s),$t=(m,s)=>{let n,a=0;return(...l)=>{const g=Date.now(),$=g-a;!a||$>=s?(a=g,m.apply(void 0,l)):n||(n=setTimeout(()=>{a=g,m.apply(void 0,l),n=null},s-$))}},Ft=(m,s)=>{const n=document.createElement("canvas");n.width=n.height=1;const a=n.getContext("2d");a.fillStyle=m,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data;return`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${s})`},Ht=({xCenterPoint:m,cfg:s,timePerPixel:n,timeSpacing:a,currentTime:l,$canvas:g,screenScaleCount:$,scaleHeight:D,startTime:T,drawLine:b,drawText:S,drawArea:v})=>{const z=({space:I,scaleTimeFormat:at,bgTimeFormat:lt,pointerTimeFormat:mt})=>{S({x:g.width-m/10,y:6,text:nt(l,lt),fontSize:`${g.height-5}px`,align:"right",baseLine:"top",color:s.bgTextColor});const ot=T%a,K=ot/n;for(let V=0;V<$;V++){const j=V*s.scaleSpacing-K-s.pointerWidth/2,P=T+V*a-ot;if(P%(a*I)===0){b({x:j,y:D.long}),S({x:j,y:g.height-D.long-5,text:nt(P,at),baseLine:"bottom"});continue}b({x:j,y:D.short})}b({x:m-s.pointerWidth/2,y:g.height,width:s.pointerWidth,color:s.pointerColor}),v({startX:m-s.pointerDisplayWidth/2,startY:4,endX:m+s.pointerDisplayWidth/2,endY:4+s.pointerDisplayHeight,bgColor:s.pointerColor}),S({x:m,y:s.pointerDisplayHeight/2+5,text:nt(l,mt),align:"center",baseLine:"middle"})},O=s.thresholdsConfig[a];O&&z({space:O.space,scaleTimeFormat:O.scaleTimeFormat,bgTimeFormat:O.bgTimeFormat,pointerTimeFormat:O.pointerTimeFormat})},Ct={fill:!0,width:1e3,height:60,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",fontFamily:"Arial",scaleColor:"#ffffff",scaleSpacing:7,areaBgColor:"#ffffff55",pointerColor:"#00aeec",pointerWidth:3,pointerDisplayWidth:100,pointerDisplayHeight:14,fps:60,zoom:3,timeSpacingList:[10,100,1e3,1e4,6e4,6e5,36e5,864e5,6048e5],thresholdsConfig:{10:{scaleTimeFormat:"mm:ss:SSS",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},100:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},1e3:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},1e4:{scaleTimeFormat:"HH:mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:12},6e4:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},6e5:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},36e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"MM/DD HH:mm",space:12},864e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"YYYY/MM/DD HH:mm",space:12},6048e5:{scaleTimeFormat:"YYYY/MM/DD",bgTimeFormat:"YYYY",pointerTimeFormat:"YYYY/MM/DD",space:10}}};class Ot{constructor(s,n){E(this,C);it(this,"$canvas");it(this,"$canvasParent");it(this,"ctx");it(this,"cfg");E(this,J,M());E(this,_,0);E(this,A);E(this,y);E(this,B);E(this,N,!1);E(this,rt,({x:s,y:n,width:a=1,color:l=this.cfg.scaleColor})=>{this.ctx.beginPath(),this.ctx.moveTo(s,this.$canvas.height),this.ctx.lineTo(s,this.$canvas.height-n),this.ctx.closePath(),this.ctx.strokeStyle=l,this.ctx.lineWidth=a,this.ctx.stroke()});E(this,Q,({x:s,y:n,text:a,color:l=this.cfg.textColor,fontSize:g="11px",align:$="center",baseLine:D="alphabetic"})=>{this.ctx.beginPath(),this.ctx.font=`${g} ${this.cfg.fontFamily}`,this.ctx.fillStyle=l,this.ctx.textAlign=$,this.ctx.textBaseline=D,this.ctx.fillText(a,s,n)});E(this,q,({startX:s,startY:n,endX:a,endY:l,bgColor:g})=>{this.ctx.beginPath(),this.ctx.rect(s,n,a-s,l-n),this.ctx.fillStyle=g,this.ctx.fill()});if(!s)throw new Error("canvas Element Or Element ID is required!");typeof s=="string"?this.$canvas=document.querySelector(s):this.$canvas=s,this.ctx=this.$canvas.getContext("2d"),this.cfg={...Ct,...n},n!=null&&n.pointColor&&(this.cfg.pointerColor=n.pointColor),n!=null&&n.pointWidth&&(this.cfg.pointerWidth=n.pointWidth);const{fill:a,width:l,height:g,zoom:$,timeSpacingList:D,scaleHeight:T,textColor:b,bgTextColor:S}=this.cfg;if(S||(this.cfg.bgTextColor=Ft(b,.18)),$<0||$>=D.length||$%1!==0)throw new Error(`zoom must be 0 ~ ${D.length-1}, and must be an integer`);if(a){const v=this.$canvas.parentElement;this.$canvasParent=v,this.$canvas.width=v.clientWidth,this.$canvas.height=v.clientHeight,new ResizeObserver($t(Z(this,C,yt).bind(this),200)).observe(v)}else this.$canvas.width=l,this.$canvas.height=g;k(this,y,D[$]),T!=null&&T.long&&(T!=null&&T.short)?k(this,B,T):k(this,B,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw(),this.$canvas.addEventListener("wheel",Z(this,C,Tt).bind(this),{passive:!1}),this.$canvas.addEventListener("mousedown",Z(this,C,Dt).bind(this))}draw({currentTime:s,areas:n,_privateFlag:a}={}){if(h(this,N)&&!a)return;k(this,_,s||Date.now()),k(this,A,n||[]);const l=Math.ceil(this.$canvas.width/this.cfg.scaleSpacing),g=l*h(this,y),$=h(this,_)-g/2,D=h(this,_)+g/2,T=this.$canvas.width/2,b=g/this.$canvas.width;Z(this,C,bt).call(this),h(this,q).call(this,{startX:0,startY:0,endX:this.$canvas.width,endY:this.$canvas.height,bgColor:this.cfg.bgColor}),h(this,A).forEach(S=>{const v=S.startTime<=$?0:Math.round((S.startTime-$)/b),z=S.endTime>=D?this.$canvas.width:Math.round((S.endTime-$)/b);v<this.$canvas.width&&z>0&&h(this,q).call(this,{startX:v,startY:0,endX:z,endY:this.$canvas.height,bgColor:S.bgColor||this.cfg.areaBgColor})}),Ht.bind(this)({xCenterPoint:T,screenScaleCount:l,startTime:$,timePerPixel:b,scaleHeight:h(this,B),timeSpacing:h(this,y),currentTime:h(this,_),$canvas:this.$canvas,cfg:this.cfg,drawLine:h(this,rt).bind(this),drawText:h(this,Q).bind(this),drawArea:h(this,q).bind(this)}),Z(this,C,wt).call(this)}getCurrentTime(){return h(this,_)}on(s,n){h(this,J).on(s,n)}off(s,n){h(this,J).off(s,n)}}return J=new WeakMap,_=new WeakMap,A=new WeakMap,y=new WeakMap,B=new WeakMap,N=new WeakMap,C=new WeakSet,Dt=function(s){k(this,N,!0);let n=s.clientX,a=h(this,_);const l=$t(({clientX:D})=>{h(this,N)&&(a=Math.round(h(this,_)-h(this,y)/this.cfg.scaleSpacing*(D-n)),n=D,this.draw({currentTime:a,areas:h(this,A),_privateFlag:!0}))},1e3/this.cfg.fps),g=D=>{const T=this.$canvas.getBoundingClientRect(),b=D.clientX-T.left,S=D.clientY-T.top,v=3;(b<v||b>this.$canvas.width-v||S<v||S>this.$canvas.height-v)&&(this.$canvas.removeEventListener("mousemove",l),this.$canvas.removeEventListener("mousemove",g))},$=()=>{this.$canvas.removeEventListener("mousemove",l),this.$canvas.removeEventListener("mousemove",g),document.removeEventListener("mouseup",$),k(this,N,!1),Z(this,C,Yt).call(this,"dragged",a)};this.$canvas.addEventListener("mousemove",l),this.$canvas.addEventListener("mousemove",g),document.addEventListener("mouseup",$)},Tt=function(s){s.preventDefault();const n=this.cfg.timeSpacingList.findIndex(a=>a===h(this,y));s.deltaY<0&&n>0?(k(this,y,this.cfg.timeSpacingList[n-1]),this.draw({currentTime:h(this,_),areas:h(this,A),_privateFlag:!0})):s.deltaY>0&&n<this.cfg.timeSpacingList.length-1&&(k(this,y,this.cfg.timeSpacingList[n+1]),this.draw({currentTime:h(this,_),areas:h(this,A),_privateFlag:!0}))},yt=function(){this.$canvasParent&&(this.$canvas.width=this.$canvasParent.clientWidth,this.$canvas.height=this.$canvasParent.clientHeight,this.cfg.scaleHeight||k(this,B,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw({currentTime:h(this,_),areas:h(this,A)}))},bt=function(){this.ctx.clearRect(0,0,this.$canvas.width,this.$canvas.height)},wt=function(){const s=()=>h(this,y)<1e3?`${h(this,y)}ms`:h(this,y)<6e4?`${Math.round(h(this,y)/100)/10}sec`:h(this,y)<36e5?`${Math.round(h(this,y)/100/60)/10}min`:h(this,y)<864e5?`${Math.round(h(this,y)/100/60/60)/10}hours`:h(this,y)<6048e5?`${Math.round(h(this,y)/100/60/60/24)/10}days`:`${Math.round(h(this,y)/100/60/60/24/7)/10}weeks`;h(this,Q).call(this,{x:this.cfg.scaleSpacing+12,y:9,text:s(),align:"left",baseLine:"middle"}),this.ctx.beginPath(),this.ctx.moveTo(5,6),this.ctx.lineTo(5,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,6),this.ctx.strokeStyle=this.cfg.scaleColor,this.ctx.lineWidth=1.5,this.ctx.stroke()},rt=new WeakMap,Q=new WeakMap,q=new WeakMap,Yt=function(...s){h(this,J).emit(...s)},f.default=Ot,f.format=nt,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),f}({});
