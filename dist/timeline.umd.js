(function(T,S){typeof exports=="object"&&typeof module<"u"?S(exports):typeof define=="function"&&define.amd?define(["exports"],S):(T=typeof globalThis<"u"?globalThis:T||self,S(T.$timeline={}))})(this,function(T){"use strict";var ie=Object.defineProperty;var se=(T,S,k)=>S in T?ie(T,S,{enumerable:!0,configurable:!0,writable:!0,value:k}):T[S]=k;var gt=(T,S,k)=>(se(T,typeof S!="symbol"?S+"":S,k),k),Lt=(T,S,k)=>{if(!S.has(T))throw TypeError("Cannot "+k)};var s=(T,S,k)=>(Lt(T,S,"read from private field"),k?k.call(T):S.get(T)),L=(T,S,k)=>{if(S.has(T))throw TypeError("Cannot add the same private member more than once");S instanceof WeakSet?S.add(T):S.set(T,k)},_=(T,S,k,at)=>(Lt(T,S,"write to private field"),at?at.call(T,k):S.set(T,k),k);var Z=(T,S,k)=>(Lt(T,S,"access private method"),k);var ot,Q,ht,I,J,z,st,N,tt,K,lt,pt,Pt,Mt,Xt,Dt,It,Tt,Ut,xt,jt,yt,At,St,Zt,Yt,Nt,bt,Rt,wt,dt,ct,et,ft;function S(g){return{all:g=g||new Map,on:function(t,e){var a=g.get(t);a?a.push(e):g.set(t,[e])},off:function(t,e){var a=g.get(t);a&&(e?a.splice(a.indexOf(e)>>>0,1):g.set(t,[]))},emit:function(t,e){var a=g.get(t);a&&a.slice().map(function($){$(e)}),(a=g.get("*"))&&a.slice().map(function($){$(t,e)})}}}var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var zt={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e=1e3,a=6e4,$=36e5,v="millisecond",l="second",u="minute",c="hour",x="day",E="week",M="month",Y="quarter",D="year",b="date",o="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var r=["th","st","nd","rd"],i=f%100;return"["+f+(r[(i-20)%10]||r[i]||r[0])+"]"}},C=function(f,r,i){var h=String(f);return!h||h.length>=r?f:""+Array(r+1-h.length).join(i)+f},R={s:C,z:function(f){var r=-f.utcOffset(),i=Math.abs(r),h=Math.floor(i/60),n=i%60;return(r<=0?"+":"-")+C(h,2,"0")+":"+C(n,2,"0")},m:function f(r,i){if(r.date()<i.date())return-f(i,r);var h=12*(i.year()-r.year())+(i.month()-r.month()),n=r.clone().add(h,M),d=i-n<0,m=r.clone().add(h+(d?-1:1),M);return+(-(h+(i-n)/(d?n-m:m-n))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M,y:D,w:E,d:x,D:b,h:c,m:u,s:l,ms:v,Q:Y}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},H="en",X={};X[H]=w;var j="$isDayjsObject",G=function(f){return f instanceof Ot||!(!f||!f[j])},q=function f(r,i,h){var n;if(!r)return H;if(typeof r=="string"){var d=r.toLowerCase();X[d]&&(n=d),i&&(X[d]=i,n=d);var m=r.split("-");if(!n&&m.length>1)return f(m[0])}else{var O=r.name;X[O]=r,n=O}return!h&&n&&(H=n),n||!h&&H},F=function(f,r){if(G(f))return f.clone();var i=typeof r=="object"?r:{};return i.date=f,i.args=arguments,new Ot(i)},p=R;p.l=q,p.i=G,p.w=function(f,r){return F(f,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Ot=function(){function f(i){this.$L=q(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[j]=!0}var r=f.prototype;return r.parse=function(i){this.$d=function(h){var n=h.date,d=h.utc;if(n===null)return new Date(NaN);if(p.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var m=n.match(y);if(m){var O=m[2]-1||0,W=(m[7]||"0").substring(0,3);return d?new Date(Date.UTC(m[1],O,m[3]||1,m[4]||0,m[5]||0,m[6]||0,W)):new Date(m[1],O,m[3]||1,m[4]||0,m[5]||0,m[6]||0,W)}}return new Date(n)}(i),this.init()},r.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},r.$utils=function(){return p},r.isValid=function(){return this.$d.toString()!==o},r.isSame=function(i,h){var n=F(i);return this.startOf(h)<=n&&n<=this.endOf(h)},r.isAfter=function(i,h){return F(i)<this.startOf(h)},r.isBefore=function(i,h){return this.endOf(h)<F(i)},r.$g=function(i,h,n){return p.u(i)?this[h]:this.set(n,i)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(i,h){var n=this,d=!!p.u(h)||h,m=p.p(i),O=function(rt,B){var it=p.w(n.$u?Date.UTC(n.$y,B,rt):new Date(n.$y,B,rt),n);return d?it:it.endOf(x)},W=function(rt,B){return p.w(n.toDate()[rt].apply(n.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(B)),n)},U=this.$W,A=this.$M,V=this.$D,ut="set"+(this.$u?"UTC":"");switch(m){case D:return d?O(1,0):O(31,11);case M:return d?O(1,A):O(0,A+1);case E:var nt=this.$locale().weekStart||0,mt=(U<nt?U+7:U)-nt;return O(d?V-mt:V+(6-mt),A);case x:case b:return W(ut+"Hours",0);case c:return W(ut+"Minutes",1);case u:return W(ut+"Seconds",2);case l:return W(ut+"Milliseconds",3);default:return this.clone()}},r.endOf=function(i){return this.startOf(i,!1)},r.$set=function(i,h){var n,d=p.p(i),m="set"+(this.$u?"UTC":""),O=(n={},n[x]=m+"Date",n[b]=m+"Date",n[M]=m+"Month",n[D]=m+"FullYear",n[c]=m+"Hours",n[u]=m+"Minutes",n[l]=m+"Seconds",n[v]=m+"Milliseconds",n)[d],W=d===x?this.$D+(h-this.$W):h;if(d===M||d===D){var U=this.clone().set(b,1);U.$d[O](W),U.init(),this.$d=U.set(b,Math.min(this.$D,U.daysInMonth())).$d}else O&&this.$d[O](W);return this.init(),this},r.set=function(i,h){return this.clone().$set(i,h)},r.get=function(i){return this[p.p(i)]()},r.add=function(i,h){var n,d=this;i=Number(i);var m=p.p(h),O=function(A){var V=F(d);return p.w(V.date(V.date()+Math.round(A*i)),d)};if(m===M)return this.set(M,this.$M+i);if(m===D)return this.set(D,this.$y+i);if(m===x)return O(1);if(m===E)return O(7);var W=(n={},n[u]=a,n[c]=$,n[l]=e,n)[m]||1,U=this.$d.getTime()+i*W;return p.w(U,this)},r.subtract=function(i,h){return this.add(-1*i,h)},r.format=function(i){var h=this,n=this.$locale();if(!this.isValid())return n.invalidDate||o;var d=i||"YYYY-MM-DDTHH:mm:ssZ",m=p.z(this),O=this.$H,W=this.$m,U=this.$M,A=n.weekdays,V=n.months,ut=n.meridiem,nt=function(B,it,$t,Ct){return B&&(B[it]||B(h,d))||$t[it].slice(0,Ct)},mt=function(B){return p.s(O%12||12,B,"0")},rt=ut||function(B,it,$t){var Ct=B<12?"AM":"PM";return $t?Ct.toLowerCase():Ct};return d.replace(P,function(B,it){return it||function($t){switch($t){case"YY":return String(h.$y).slice(-2);case"YYYY":return p.s(h.$y,4,"0");case"M":return U+1;case"MM":return p.s(U+1,2,"0");case"MMM":return nt(n.monthsShort,U,V,3);case"MMMM":return nt(V,U);case"D":return h.$D;case"DD":return p.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return nt(n.weekdaysMin,h.$W,A,2);case"ddd":return nt(n.weekdaysShort,h.$W,A,3);case"dddd":return A[h.$W];case"H":return String(O);case"HH":return p.s(O,2,"0");case"h":return mt(1);case"hh":return mt(2);case"a":return rt(O,W,!0);case"A":return rt(O,W,!1);case"m":return String(W);case"mm":return p.s(W,2,"0");case"s":return String(h.$s);case"ss":return p.s(h.$s,2,"0");case"SSS":return p.s(h.$ms,3,"0");case"Z":return m}return null}(B)||m.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(i,h,n){var d,m=this,O=p.p(h),W=F(i),U=(W.utcOffset()-this.utcOffset())*a,A=this-W,V=function(){return p.m(m,W)};switch(O){case D:d=V()/12;break;case M:d=V();break;case Y:d=V()/3;break;case E:d=(A-U)/6048e5;break;case x:d=(A-U)/864e5;break;case c:d=A/$;break;case u:d=A/a;break;case l:d=A/e;break;default:d=A}return n?d:p.a(d)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return X[this.$L]},r.locale=function(i,h){if(!i)return this.$L;var n=this.clone(),d=q(i,h,!0);return d&&(n.$L=d),n},r.clone=function(){return p.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},f}(),Wt=Ot.prototype;return F.prototype=Wt,[["$ms",v],["$s",l],["$m",u],["$H",c],["$W",x],["$M",M],["$y",D],["$D",b]].forEach(function(f){Wt[f[1]]=function(r){return this.$g(r,f[0],f[1])}}),F.extend=function(f,r){return f.$i||(f(r,Ot,F),f.$i=!0),F},F.locale=q,F.isDayjs=G,F.unix=function(f){return F(1e3*f)},F.en=X[H],F.Ls=X,F.p={},F})})(zt);var Bt=zt.exports;const Ht=at(Bt);var _t={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e="minute",a=/[+-]\d\d(?::?\d\d)?/g,$=/([+-]|\d\d)/g;return function(v,l,u){var c=l.prototype;u.utc=function(o){var y={date:o,utc:!0,args:arguments};return new l(y)},c.utc=function(o){var y=u(this.toDate(),{locale:this.$L,utc:!0});return o?y.add(this.utcOffset(),e):y},c.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var x=c.parse;c.parse=function(o){o.utc&&(this.$u=!0),this.$utils().u(o.$offset)||(this.$offset=o.$offset),x.call(this,o)};var E=c.init;c.init=function(){if(this.$u){var o=this.$d;this.$y=o.getUTCFullYear(),this.$M=o.getUTCMonth(),this.$D=o.getUTCDate(),this.$W=o.getUTCDay(),this.$H=o.getUTCHours(),this.$m=o.getUTCMinutes(),this.$s=o.getUTCSeconds(),this.$ms=o.getUTCMilliseconds()}else E.call(this)};var M=c.utcOffset;c.utcOffset=function(o,y){var P=this.$utils().u;if(P(o))return this.$u?0:P(this.$offset)?M.call(this):this.$offset;if(typeof o=="string"&&(o=function(H){H===void 0&&(H="");var X=H.match(a);if(!X)return null;var j=(""+X[0]).match($)||["-",0,0],G=j[0],q=60*+j[1]+ +j[2];return q===0?0:G==="+"?q:-q}(o),o===null))return this;var w=Math.abs(o)<=16?60*o:o,C=this;if(y)return C.$offset=w,C.$u=o===0,C;if(o!==0){var R=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(w+R,e)).$offset=w,C.$x.$localOffset=R}else C=this.utc();return C};var Y=c.format;c.format=function(o){var y=o||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return Y.call(this,y)},c.valueOf=function(){var o=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*o},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var D=c.toDate;c.toDate=function(o){return o==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():D.call(this)};var b=c.diff;c.diff=function(o,y,P){if(o&&this.$u===o.$u)return b.call(this,o,y,P);var w=this.local(),C=u(o).local();return b.call(w,C,y,P)}}})})(_t);var qt=_t.exports;const Jt=at(qt);var Et={exports:{}};(function(g,t){(function(e,a){g.exports=a()})(k,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function($,v,l){var u,c=function(Y,D,b){b===void 0&&(b={});var o=new Date(Y),y=function(P,w){w===void 0&&(w={});var C=w.timeZoneName||"short",R=P+"|"+C,H=a[R];return H||(H=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:P,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),a[R]=H),H}(D,b);return y.formatToParts(o)},x=function(Y,D){for(var b=c(Y,D),o=[],y=0;y<b.length;y+=1){var P=b[y],w=P.type,C=P.value,R=e[w];R>=0&&(o[R]=parseInt(C,10))}var H=o[3],X=H===24?0:H,j=o[0]+"-"+o[1]+"-"+o[2]+" "+X+":"+o[4]+":"+o[5]+":000",G=+Y;return(l.utc(j).valueOf()-(G-=G%1e3))/6e4},E=v.prototype;E.tz=function(Y,D){Y===void 0&&(Y=u);var b=this.utcOffset(),o=this.toDate(),y=o.toLocaleString("en-US",{timeZone:Y}),P=Math.round((o-new Date(y))/1e3/60),w=l(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(o.getTimezoneOffset()/15)-P,!0);if(D){var C=w.utcOffset();w=w.add(b-C,"minute")}return w.$x.$timezone=Y,w},E.offsetName=function(Y){var D=this.$x.$timezone||l.tz.guess(),b=c(this.valueOf(),D,{timeZoneName:Y}).find(function(o){return o.type.toLowerCase()==="timezonename"});return b&&b.value};var M=E.startOf;E.startOf=function(Y,D){if(!this.$x||!this.$x.$timezone)return M.call(this,Y,D);var b=l(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return M.call(b,Y,D).tz(this.$x.$timezone,!0)},l.tz=function(Y,D,b){var o=b&&D,y=b||D||u,P=x(+l(),y);if(typeof Y!="string")return l(Y).tz(y);var w=function(X,j,G){var q=X-60*j*1e3,F=x(q,G);if(j===F)return[q,j];var p=x(q-=60*(F-j)*1e3,G);return F===p?[q,F]:[X-60*Math.min(F,p)*1e3,Math.max(F,p)]}(l.utc(Y,o).valueOf(),P,y),C=w[0],R=w[1],H=l(C).utcOffset(R);return H.$x.$timezone=y,H},l.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},l.tz.setDefault=function(Y){u=Y}}})})(Et);var Vt=Et.exports;const Gt=at(Vt);Ht.extend(Jt),Ht.extend(Gt);const vt=(g,t="MM/DD HH:mm Z",e)=>Ht(g).tz(e).format(t),Ft=(g,t)=>{let e,a=0;return(...$)=>{const v=Date.now(),l=v-a;!a||l>=t?(a=v,g.apply(void 0,$)):e||(e=setTimeout(()=>{a=v,g.apply(void 0,$),e=null},t-l))}},kt=g=>{const[t,e]=[g[0],g[1]],a=e.clientX-t.clientX,$=e.clientY-t.clientY;return Math.sqrt(a*a+$*$)},Qt=(g,t)=>{const e=document.createElement("canvas");e.width=e.height=1;const a=e.getContext("2d");a.fillStyle=g,a.fillRect(0,0,1,1);const $=a.getImageData(0,0,1,1).data;return`rgba(${$[0]}, ${$[1]}, ${$[2]}, ${t})`},Kt=({xCenterPoint:g,cfg:t,timePerPixel:e,timeSpacing:a,currentTime:$,$canvas:v,screenScaleCount:l,scaleHeight:u,startTime:c,drawLine:x,drawText:E,drawArea:M})=>{const Y=({space:b,scaleTimeFormat:o,bgTimeFormat:y,pointerTimeFormat:P,timezone:w})=>{E({x:v.width-g/10,y:6,text:vt($,y,w),fontSize:`${v.height-5}px`,align:"right",baseLine:"top",color:t.bgTextColor});const C=c%a,R=C/e;for(let H=0;H<l;H++){const X=H*t.scaleSpacing-R-t.pointerWidth/2,j=c+H*a-C;if(j%(a*b)===0){x({x:X,y:u.long}),E({x:X,y:v.height-u.long-5,text:vt(j,o,w),baseLine:"bottom"});continue}x({x:X,y:u.short})}x({x:g-t.pointerWidth/2,y:v.height,width:t.pointerWidth,color:t.pointerColor}),M({startX:g-t.pointerDisplayWidth/2,startY:4,endX:g+t.pointerDisplayWidth/2,endY:4+t.pointerDisplayHeight,bgColor:t.pointerColor}),E({x:g,y:t.pointerDisplayHeight/2+5,text:vt($,P,w),align:"center",baseLine:"middle"})},D=t.thresholdsConfig[a];D&&Y({space:D.space,scaleTimeFormat:D.scaleTimeFormat,bgTimeFormat:D.bgTimeFormat,pointerTimeFormat:D.pointerTimeFormat,timezone:t.timezone})},te={fill:!0,width:1e3,height:60,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",fontFamily:"Arial",scaleColor:"#ffffff",scaleSpacing:7,areaBgColor:"#ffffff55",pointerColor:"#00aeec",pointerWidth:3,pointerDisplayWidth:100,pointerDisplayHeight:14,fps:60,zoom:3,timeSpacingList:[10,100,1e3,1e4,6e4,6e5,36e5,864e5,6048e5],thresholdsConfig:{10:{scaleTimeFormat:"mm:ss:SSS",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},100:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},1e3:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},1e4:{scaleTimeFormat:"HH:mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:12},6e4:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},6e5:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},36e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"MM/DD HH:mm",space:12},864e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"YYYY/MM/DD HH:mm",space:12},6048e5:{scaleTimeFormat:"YYYY/MM/DD",bgTimeFormat:"YYYY",pointerTimeFormat:"YYYY/MM/DD",space:10}}};class ee{constructor(t,e){L(this,pt);L(this,Mt);L(this,Dt);L(this,Tt);L(this,xt);L(this,yt);L(this,St);L(this,Yt);L(this,bt);L(this,et);gt(this,"$canvas");gt(this,"$canvasParent");gt(this,"ctx");gt(this,"cfg");L(this,ot,void 0);L(this,Q,void 0);L(this,ht,S());L(this,I,0);L(this,J,void 0);L(this,z,void 0);L(this,st,void 0);L(this,N,!1);L(this,tt,null);L(this,K,null);L(this,lt,0);L(this,wt,({x:t,y:e,width:a=1,color:$=this.cfg.scaleColor})=>{this.ctx.beginPath(),this.ctx.moveTo(t,this.$canvas.height),this.ctx.lineTo(t,this.$canvas.height-e),this.ctx.closePath(),this.ctx.strokeStyle=$,this.ctx.lineWidth=a,this.ctx.stroke()});L(this,dt,({x:t,y:e,text:a,color:$=this.cfg.textColor,fontSize:v="11px",align:l="center",baseLine:u="alphabetic"})=>{this.ctx.beginPath(),this.ctx.font=`${v} ${this.cfg.fontFamily}`,this.ctx.fillStyle=$,this.ctx.textAlign=l,this.ctx.textBaseline=u,this.ctx.fillText(a,t,e)});L(this,ct,({startX:t,startY:e,endX:a,endY:$,bgColor:v})=>{this.ctx.beginPath(),this.ctx.rect(t,e,a-t,$-e),this.ctx.fillStyle=v,this.ctx.fill()});if(!t)throw new Error("canvas Element Or Element ID is required!");typeof t=="string"?this.$canvas=document.querySelector(t):this.$canvas=t,this.ctx=this.$canvas.getContext("2d"),this.cfg={...te,...e},e!=null&&e.pointColor&&(this.cfg.pointerColor=e.pointColor),e!=null&&e.pointWidth&&(this.cfg.pointerWidth=e.pointWidth);const{fill:a,width:$,height:v,zoom:l,timeSpacingList:u,scaleHeight:c,textColor:x,bgTextColor:E}=this.cfg;if(E||(this.cfg.bgTextColor=Qt(x,.18)),l<0||l>=u.length||l%1!==0)throw new Error(`zoom must be 0 ~ ${u.length-1}, and must be an integer`);if(a){const M=this.$canvas.parentElement;this.$canvasParent=M,this.$canvas.width=M.clientWidth,this.$canvas.height=M.clientHeight,new ResizeObserver(Ft(Z(this,St,Zt).bind(this),200)).observe(M)}else this.$canvas.width=$,this.$canvas.height=v;_(this,z,u[l]),c!=null&&c.long&&(c!=null&&c.short)?_(this,st,c):_(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw(),this.$canvas.addEventListener("wheel",Z(this,Dt,It).bind(this),{passive:!1}),this.$canvas.addEventListener("mousedown",Z(this,Mt,Xt).bind(this)),this.$canvas.addEventListener("click",Z(this,pt,Pt).bind(this)),this.$canvas.addEventListener("touchstart",Z(this,Tt,Ut).bind(this),{passive:!1}),this.$canvas.addEventListener("touchmove",Ft(Z(this,xt,jt).bind(this),1e3/this.cfg.fps),{passive:!1}),this.$canvas.addEventListener("touchend",Z(this,yt,At).bind(this))}draw({currentTime:t,areas:e,_privateFlag:a}={}){if(s(this,N)&&!a)return;_(this,I,t||Date.now()),_(this,J,e||[]);const $=this.$canvas.width/2,v=Math.ceil(this.$canvas.width/this.cfg.scaleSpacing),l=v*s(this,z),[u,c]=_(this,ot,[s(this,I)-l/2,s(this,I)+l/2]);_(this,Q,l/this.$canvas.width),Z(this,Yt,Nt).call(this),s(this,ct).call(this,{startX:0,startY:0,endX:this.$canvas.width,endY:this.$canvas.height,bgColor:this.cfg.bgColor}),s(this,J).forEach(x=>{const E=x.startTime<=u?0:Math.round((x.startTime-u)/s(this,Q)),M=x.endTime>=c?this.$canvas.width:Math.round((x.endTime-u)/s(this,Q));E<this.$canvas.width&&M>0&&s(this,ct).call(this,{startX:E,startY:0,endX:M,endY:this.$canvas.height,bgColor:x.bgColor||this.cfg.areaBgColor})}),Kt.bind(this)({xCenterPoint:$,screenScaleCount:v,startTime:u,timePerPixel:s(this,Q),scaleHeight:s(this,st),timeSpacing:s(this,z),currentTime:s(this,I),$canvas:this.$canvas,cfg:this.cfg,drawLine:s(this,wt).bind(this),drawText:s(this,dt).bind(this),drawArea:s(this,ct).bind(this)}),Z(this,bt,Rt).call(this)}getCurrentTime(){return s(this,I)}getTimeRange(){return s(this,ot)}getMsPerPixel(){return s(this,Q)}on(t,e){s(this,ht).on(t,e)}off(t,e){s(this,ht).off(t,e)}}ot=new WeakMap,Q=new WeakMap,ht=new WeakMap,I=new WeakMap,J=new WeakMap,z=new WeakMap,st=new WeakMap,N=new WeakMap,tt=new WeakMap,K=new WeakMap,lt=new WeakMap,pt=new WeakSet,Pt=function(t){if(s(this,N))return;const[e]=s(this,ot),a=this.$canvas.getBoundingClientRect(),$=t.clientX-a.left,v=Math.round(e+$*s(this,Q));_(this,I,v),this.draw({currentTime:s(this,I),areas:s(this,J)}),Z(this,et,ft).call(this,"click",v)},Mt=new WeakSet,Xt=function(t){_(this,N,!1);let e=t.clientX,a=s(this,I);_(this,lt,t.clientX);const $=Ft(({clientX:u})=>{s(this,N)||Math.abs(u-s(this,lt))>5&&_(this,N,!0),s(this,N)&&(a=Math.round(s(this,I)-s(this,z)/this.cfg.scaleSpacing*(u-e)),e=u,this.draw({currentTime:a,areas:s(this,J),_privateFlag:!0}))},1e3/this.cfg.fps),v=u=>{const c=this.$canvas.getBoundingClientRect(),x=u.clientX-c.left,E=u.clientY-c.top,M=3;(x<M||x>this.$canvas.width-M||E<M||E>this.$canvas.height-M)&&(this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",v))},l=()=>{this.$canvas.removeEventListener("mousemove",$),this.$canvas.removeEventListener("mousemove",v),document.removeEventListener("mouseup",l),s(this,N)&&Z(this,et,ft).call(this,"dragged",a)};this.$canvas.addEventListener("mousemove",$),this.$canvas.addEventListener("mousemove",v),document.addEventListener("mouseup",l)},Dt=new WeakSet,It=function(t){t.preventDefault();const e=this.cfg.timeSpacingList.findIndex(a=>a===s(this,z));t.deltaY<0&&e>0?(_(this,z,this.cfg.timeSpacingList[e-1]),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0}),Z(this,et,ft).call(this,"zoom",e-1)):t.deltaY>0&&e<this.cfg.timeSpacingList.length-1&&(_(this,z,this.cfg.timeSpacingList[e+1]),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0}),Z(this,et,ft).call(this,"zoom",e+1))},Tt=new WeakSet,Ut=function(t){t.preventDefault(),_(this,N,!0),_(this,tt,t.touches[0].clientX),t.touches.length===2&&_(this,K,kt(t.touches))},xt=new WeakSet,jt=function(t){if(t.preventDefault(),!s(this,N))return;if(t.touches.length===2&&s(this,K)!==null){const v=kt(t.touches),l=Math.abs(s(this,K)-v)>=35;if(!l)return;let u=this.cfg.timeSpacingList.findIndex(c=>c===s(this,z));if(v<s(this,K)?u+=1:u-=1,u<0||u>this.cfg.timeSpacingList.length-1)return;_(this,z,this.cfg.timeSpacingList[u]),l&&_(this,K,v),this.draw({currentTime:s(this,I),areas:s(this,J),_privateFlag:!0});return}if(s(this,tt)===null)return;const e=t.touches[0],a=e.clientX-s(this,tt),$=Math.round(s(this,I)-s(this,z)/this.cfg.scaleSpacing*a);_(this,tt,e.clientX),this.draw({currentTime:$,areas:s(this,J),_privateFlag:!0})},yt=new WeakSet,At=function(t){s(this,N)&&(_(this,N,!1),_(this,tt,null),t.touches.length<2&&_(this,K,null),Z(this,et,ft).call(this,"dragged",s(this,I)))},St=new WeakSet,Zt=function(){this.$canvasParent&&(this.$canvas.width=this.$canvasParent.clientWidth,this.$canvas.height=this.$canvasParent.clientHeight,this.cfg.scaleHeight||_(this,st,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw({currentTime:s(this,I),areas:s(this,J)}))},Yt=new WeakSet,Nt=function(){this.ctx.clearRect(0,0,this.$canvas.width,this.$canvas.height)},bt=new WeakSet,Rt=function(){const t=()=>s(this,z)<1e3?`${s(this,z)}ms`:s(this,z)<6e4?`${Math.round(s(this,z)/100)/10}sec`:s(this,z)<36e5?`${Math.round(s(this,z)/100/60)/10}min`:s(this,z)<864e5?`${Math.round(s(this,z)/100/60/60)/10}hours`:s(this,z)<6048e5?`${Math.round(s(this,z)/100/60/60/24)/10}days`:`${Math.round(s(this,z)/100/60/60/24/7)/10}weeks`;s(this,dt).call(this,{x:this.cfg.scaleSpacing+12,y:9,text:t(),align:"left",baseLine:"middle"}),this.ctx.beginPath(),this.ctx.moveTo(5,6),this.ctx.lineTo(5,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,6),this.ctx.strokeStyle=this.cfg.scaleColor,this.ctx.lineWidth=1.5,this.ctx.stroke()},wt=new WeakMap,dt=new WeakMap,ct=new WeakMap,et=new WeakSet,ft=function(...t){s(this,ht).emit(...t)},T.default=ee,T.format=vt,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
